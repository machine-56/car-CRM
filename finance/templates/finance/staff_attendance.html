{% extends 'finance/financeBase.html' %}
{% load static %}

{% block content %}
<link rel="stylesheet" href="{% static 'finance/css/staff_attendance.css' %}">

<div class="container testing">
  <div class="d-flex justify-content-between align-items-center mb-3 no-print">
    <h2>Attendance Records</h2>
    <div>
      <button class="btn btn-primary me-2" id="btnPrint" data-table="attendanceTable">Print as PDF</button>
      <button class="btn btn-success me-2" id="btnExcel" data-table="attendanceTable">Export as Excel</button>
    </div>
  </div>

  <!-- Staff info -->
  <div class="mb-3">
    <p id="staffName"><strong>Name:</strong> {{ name }}</p>
    <p id="staffDept"><strong>Department:</strong> {{ department }}</p>
  </div>

  <div id="attendanceSummary" class="my-3">
    <strong>Total Days:</strong> {{ total_days }} |
    <strong>Present:</strong> {{ present_days }} |
    <strong>Absent:</strong> {{ absent_days }}
  </div>

  

  <table id="attendanceTable" class="table table-striped">
    <thead> 
      <tr>
        <th>Date</th>
        <th>Status</th>
        <th>Reason</th>
      </tr>
    </thead>
    <tbody>
      {% for record in attendance_data %}
      <tr>
        <td>{{ record.date }}</td>
        <td>{{ record.status }}</td>
        <td>{{ record.reason }}</td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
</div>

<script src="{% static 'finance/js/export.js' %}"></script>
<script src="{% static 'finance/js/attendance_summary.js' %}"></script>
{% endblock %}
